/*! For license information please see 946458b8.3eb62cc6.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[930143],{768728:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var a=o(474848),t=o(28453);const r={id:"linking-local-packages",title:"Linking in Local Packages",description:"How to link in other local packages into your Backstage monorepo"},i=void 0,s={id:"tooling/local-dev/linking-local-packages",title:"Linking in Local Packages",description:"How to link in other local packages into your Backstage monorepo",source:"@site/../docs/tooling/local-dev/linking-local-packages.md",sourceDirName:"tooling/local-dev",slug:"/tooling/local-dev/linking-local-packages",permalink:"/docs/next/tooling/local-dev/linking-local-packages",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/tooling/local-dev/linking-local-packages.md",tags:[],version:"current",frontMatter:{id:"linking-local-packages",title:"Linking in Local Packages",description:"How to link in other local packages into your Backstage monorepo"},sidebar:"docs",previous:{title:"Commands",permalink:"/docs/next/tooling/cli/commands"},next:{title:"Debugging Backstage",permalink:"/docs/next/tooling/local-dev/debugging"}},c={},l=[{value:"Why?",id:"why",level:2},{value:"External workspace linking",id:"external-workspace-linking",level:2},{value:"Common Problems",id:"common-problems",level:2},{value:"React errors",id:"react-errors",level:3}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"why",children:"Why?"}),"\n",(0,a.jsx)(n.p,{children:"If you are looking to make changes within the core Backstage repository and test\nthose changes within your Backstage application, you will need to link the two\ntogether:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"~/backstage                // cloned from Github\n~/my-backstage-application // generated using npx\n"})}),"\n",(0,a.jsxs)(n.p,{children:["For example, you might want to make modifications to ",(0,a.jsx)(n.code,{children:"@backstage/core-plugin-api"})," and try them out in your company's\ninstance of Backstage."]}),"\n",(0,a.jsx)(n.h2,{id:"external-workspace-linking",children:"External workspace linking"}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"Workspace linking is an experimental feature and may not work in all cases."})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"backstage-cli package start"})," command that is used for local development of all packages supports a ",(0,a.jsx)(n.code,{children:"--link"})," flag that can be used to link a single external workspace to the current workspace. It hooks into the module resolution and will override all imports of packages in the linked workspace to be imported from there instead. The only exception are the ",(0,a.jsx)(n.code,{children:"react"})," and ",(0,a.jsx)(n.code,{children:"react-dom"})," packages, which will always be resolved from the target package."]}),"\n",(0,a.jsxs)(n.p,{children:["When linking an external workspace, make sure that dependencies are installed and up to date in both workspaces, and that the versions of ",(0,a.jsx)(n.code,{children:"react"})," and ",(0,a.jsx)(n.code,{children:"react-dom"})," are the same in both workspaces."]}),"\n",(0,a.jsxs)(n.p,{children:["If you're within the ",(0,a.jsx)(n.code,{children:"packages/app"})," folder inside your ",(0,a.jsx)(n.code,{children:"my-backstage-application"})," workspace in the above example, you can link the ",(0,a.jsx)(n.code,{children:"backstage"})," workspace using the following command:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yarn start --link ../../../backstage\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The path provided to the ",(0,a.jsx)(n.code,{children:"--link"})," option can be a relative or absolute path, and should point to the root of the external workspace."]}),"\n",(0,a.jsxs)(n.p,{children:["With the ",(0,a.jsx)(n.code,{children:"start"})," command up and running and serving the development version of your frontend app in the browser, you can now make changes to both workspaces and see the changes reflected in the browser."]}),"\n",(0,a.jsxs)(n.p,{children:["You can also link backend packages using the exact same process, simply start your backend package with the same ",(0,a.jsx)(n.code,{children:"--link <workspace-path>"})," option."]}),"\n",(0,a.jsx)(n.h2,{id:"common-problems",children:"Common Problems"}),"\n",(0,a.jsx)(n.h3,{id:"react-errors",children:"React errors"}),"\n",(0,a.jsxs)(n.p,{children:["If you are encountering errors related to React, it is likely that the versions of React in the two workspaces are different. Make sure that the versions of ",(0,a.jsx)(n.code,{children:"react"})," and ",(0,a.jsx)(n.code,{children:"react-dom"})," are the same in both workspaces, or at least that they are in sync between the package that you're serving the app from and the external workspace."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},221020:(e,n,o)=>{var a=o(296540),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,n,o){var a,r={},l=null,d=null;for(a in void 0!==o&&(l=""+o),void 0!==n.key&&(l=""+n.key),void 0!==n.ref&&(d=n.ref),n)i.call(n,a)&&!c.hasOwnProperty(a)&&(r[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===r[a]&&(r[a]=n[a]);return{$$typeof:t,type:e,key:l,ref:d,props:r,_owner:s.current}}n.Fragment=r,n.jsx=l,n.jsxs=l},474848:(e,n,o)=>{e.exports=o(221020)},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>s});var a=o(296540);const t={},r=a.createContext(t);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);